## 내장 애너테이션

- `@Retention`

  - SOURCE: 이 애너테이션은 컴파일 시점에만 존재하며 컴파일의 바이너리 출력에는 저장되지 않는다
  - BINARY: 이 애너테이션은 컴파일러의 바이너리 출력에 저장되지만, 런타임에 리플렉션 API로 관찰할 수 없다.
  - RUNTIME: 이 애너테이션은 컴파일러의 바이너리 출력에 저장되며 런타임에 리플렉션 API를 통해 관찰할 수 있다.(default)
    - 식에 붙는 애너테이션에 대해 BINARY나 RUNTIME을 지정하는 것은 금지되어 있다.

  

  ```kotlin
  //error: expression annotations with retention other than SOURCE are prohibited
  @Target(AnnotationTarget.EXPRESSION)
  annotation class NeedToRefactor
  
  @Target(AnnotationTarget.EXPRESSION)
  @Retention(AnnotationTarget.SOURCE)
  annotation class NeedToRefactor // Ok
  ```

  

  

- `@Repeatable`

  - 애너테이션을 2번 이상 반복 적용할 수 있다.

  ```kotlin
  @Repeatable
  @Retention(AnnotationRetention.SOURCE)
  annotation class Author(val name: String)
  
  @Author("John")
  @Author("Harry")
  class Services
  ```

  

- `@MustBeDocumented`
  - 반드시 문서에 포함시키라는 뜻
  - 공개 API의 일부인 경우 이 애너테이션을 붙인다.
  - Java의 `@Documented`와 같은 역할을 한다.



- `@Target`

  - 어떤 언어 요소에 붙일 수 있는지 지정
  - AnnotationTarget 이넘에 정의된 다음 상수들을 vararg로 지정하면 된다.
    - CLASS: 클래스, 인터페이스, 객체에 붙일 수 있다.(애너테이션 클래스 포함)
    - ANNOTATION_CLASS: 애너테이션 클래스에 붙일 수 있다.
    - TYPEALIAS: 타입 별명 정의에 붙인다.
    - PROPERTY: 주생성자에 정의된 val/var 프로퍼티를 포함해, 프로퍼티에 붙일 수 있다.(지역 변수x)
    - FIELD: 프로퍼티를 뒷받침하는 필드에 붙일 수 있다. 
    - LOCAL_VARIABLE: 지역 변수에 붙일 수 있다(파라미터는 제외). 
    - VALUE_PARAMETER: 생성자, 함수, 프로퍼티 세터의 파라미터에 붙일 수 있다. 
    - CONSTRUCTOR: 주생성자나 부생성자에 붙일 수 있다.
    - FUNCTION: 람다나 익명 함수를 포함해, 함수에 붙일 수 있다(하지만 생성자나 프로퍼티 접근 자에는 붙일 수 없다).
    -  PROPERTY_GETTER/PROPERTY_SETTER: 프로퍼티 게터/프로퍼티 세터에 붙일 수 있다.
    - FILE: 파일에 붙일 수 있다.
    - TYPE: 타입 지정에 붙일 수 있다. 변수의 타입이나 함수의 파라미터 타입, 반환 타입 등을 포함한다.
    - EXPRESSION: 식에 붙일 수 있다

  - `@Target`을 지정하지 않으면 타입 별명, 타입 파라미터, 타입 지정, 식, 파일을 제외한 언어 요소에 애너테이션을 적용할 수 있다



- `@Synchronized`: 애너테이션이 붙은 함수나 프로퍼티 접근자의 본문에 진입하기 전에 모니 터(monitor)를 획득하고 본문 수행 후 모니터를 해제하게 한다.
- `@StrictFp`: 부동소수점 연산의 정밀도를 제한해서 여러 다른 플랫폼 간의 부동소수점 연산 이식성을 높여준다

- `@Suppress`: 지정한 이름의 컴파일러 경고를 표시하지 않게 할 수 있다.

  ```kotlin
  val strings = listOf<Any>("1","2","3")
  val numbers = listOf<Any>(1, 2, 3)
  
  // 경고 표시 x
  val s = @Suppress("UNCHECKED_CAST") (strings as List<String>)[0]
  
  // 적용된 요소 내부에 모든 코드에 적용된다.
  @Suppress("UNCHECKED_CAST")
  fun main() {
   val strings = listOf<Any>("1", "2", "3")
   val numbers = listOf<Any>(1, 2, 3)
   val s = (strings as List<String>)[0] // 경고 표시되지 않음
   val n = (numbers as List<Number>)[1] // 경고 표시되지 않음
  
   println(s + n) // 12
  }
  ```

  

- `@Deprecated`: 어떤 선언을 사용 금지 예정이라고 선언

```kotlin
@Deprecated(
    "Use readInt() instead", // 메시지
	ReplaceWith("readInt()") // 대안
)

fun readNum() = readLine()!!.toInt()
```

