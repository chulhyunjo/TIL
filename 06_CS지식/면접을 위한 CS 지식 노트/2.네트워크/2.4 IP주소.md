# 2.4 IP주소

## 2.4.1 ARP

- ARP(Address Resolution Protocol)
- IP 주소에서 ARP를 통해 MAC 주소를 찾아 MAC 주소를 기반으로 통신한다.
- IP와 MAC 주소의 다리 역할을 하는 프로토콜
- RARP를 통해 실제 주소인 MAC 주소를 가상 주소인 IP 주소로 변환하기도 한다.
- 'ARP Request' **브로드캐스트**를 보내서 IP주소와 맞는 MAC주소를 찾고 'ARP reply' **유니캐스트**를 통해 MAC주소를 반환한다.

> 브로드캐스트

- 송신 호스트가 전송한 데이터가 네트워크에 연결된 모든 호스트에 전송되는 방식

> 유니캐스트

- 고유 주소로 식별된 하나의 네트워크 목적지에 1:1로 데이터를 전송하는 방식



## 2.4.2 홉바이홉 통신

- IP 주소를 통해 통신하는 과정
- 홉(hop) : 건너뛰는 모습
- 각각의 라우터에 있는 라우팅 테이블의 IP를 기반으로 패킷을 전달하고 다시 전달해 나간다.

> 라우팅

- IP 주소를 찾아가는 과정



### 라우팅 테이블

- 송신지에서 수신지까지 도달하기 위해 사용되며 라우터에 들어가 있는 목적지 정보들과 그 목적지로 가기 위한 방법이 들어 있는 리스트를 뜻한다.
- 게이트웨이와 모든 목적지에 대해 해당 목적지에 도달하기 위해 거쳐야 할 다음 라우터의 정보를 가지고 있다.



### 게이트웨이

- 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 관문 역할을 하는 컴퓨터나 소프트웨어
- 서로 다른 네트워크상의 통신 프로토콜을 변환해주는 역할
- 확인하는 방법: 라우팅 테이블을 통해 볼 수 있으며 테이블은 윈도우의 명령 프롬프트에서 netstat -r 명령어를 실행하여 확인 가능하다.



## 2.4.3 IP 주소 체계

- IPv4와 IPv6로 나뉜다.
- IPv4 : 32비트를 8비트 단위로 점을 찍어 표기
  - 123.45.67.89 같은 방식
- IPv6는 64비트를 16비트 단위로 점을 찍어 표기
  - 2001:db8::ff00:42:8329 같은 방식



### 클래스 기반 할당 방식

- A, B, C, D, E 다섯 개의 클래스로 구분하는 클래스 기반 할당 방식(CIDR)을 사용
- 앞 부분을 네트워크 주소, 그 뒤에 부분을 컴퓨터에 부여하는 주소인 호스트 주소



![img](https://blog.kakaocdn.net/dn/SoMor/btqy0p8vk1l/MVVeV1FlQNtnriQRUk4Dek/img.jpg)

출처: https://kim-dragon.tistory.com/9

네트워크의 첫 번째 주소는 네트워크 주소 

마지막 주소는 브로드캐스트용 주소 : 네트워크에 속해 있는 모든 컴퓨터에 데이터를 보낼때 사용

12.0.0.0이란 네트워크를 부여 받았다고 가정할때, 첫 주소인 12.0.0.0와 마지막 주소인 12.255.255.255는 남겨두어야 하므로 12.0.0.1 ~ 12.255.255.254를 부여할 수 있다.

버리는 주소가 더 많은 단점이 있어 DHCP와 IPv6, NAT 방식을 이용한다.



#### DHCP(Dynamic Host Configuration Protocol)

- IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜
- 수동으로 할당하지 않고 자동으로 IP 주소를 할당할 수 있다.



#### NAT(Network Address Translation)

- 패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP 주소 정보를 수정하여 다른 주소로 매핑하는 방법
- IPv4 주소 체계만으로는 많은 주소를 감당하지 못하는 단점이 있다. 이를 해결하기 위해 NAT로 공인 IP와 사설 IP로 나눠서 많은 주소를 처리한다.
- 소프트웨어 : ICS, RRAS, Netfilter
- 사설 IP -> 공인 IP , 공인 IP -> 사설 IP
- 하나의 IP를 기반으로 각각 다른 IP를 가지는 것처럼 인터넷을 사용할 수 있다.



##### NAT를 이용한 보안

- 내부 네트워크에서 사용하는 IP 주소와 외부에 드러나는 IP주소를 다르게 유지할 수 있기 때문에 내부 네트워크에 대한 어느 정도의 보안이 가능하다.



##### 단점

- 여러 명이 동시에 인터넷을 접속하게 되므로 실제로 접속하는 호스트 숫자에 따라서 접속 속도가 느려질 수 있다.



## 2.4.4 IP주소를 이용한 위치 정보

- IP주소를 활용하여 동 또는 구까지의 위치를 추적할 수 있다.





