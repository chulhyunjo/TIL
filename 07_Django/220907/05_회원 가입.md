# 회원 가입

- 회원가입은 User를 Create하는 것이며 `UserCreationForm` built-in-form 이용



> ## UserCreationForm

- 주어진 username과 password로 권한이 없는 새 user를 생성하는 ModelForm
- 3개의 필드를 가짐
  1. username(from the user model)
  2. password1
  3. password2

> Custom user & Built-in auth forms

```python
# forms.py
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth import get_user_model


class CustomUserCreationForm(UserCreationForm):
    
    class Meta(UserCreationForm.Meta):
        model = get_user_model()

```

Django는 직접 참조 권장x

```python
#views.py
from .forms import CustomUserCreationForm
#create
def signup(request):
    if request.method == "POST":
        form = CustomUserCreationForm(request.POST)
        if form.is_valid():
            user = form.save()
            # 회원가입 후 로그인
            auth_login(request, user)
            return redirect('articles:index')
    else:
        form = CustomUserCreationForm()
    context = {
        'form':form,
    }
    return render(request, 'accounts/signup.html', context)
```



> get_user_model()

- **'현재 프로젝트에서 활성화된 사용자 모델(active user model)'**을 반환
- 직접 참조하지 않는 이유
  - 예를 들어 기존 User 모델이 아닌 User 모델을 커스텀 한 상황에서는 커스텀 User 모델을 자동으로 반환해주기 때문
- Django는 User클래스를 직접 참조하는 대신 **get_user_model()**을 사용해 참조해야 한다고 강조 하고 있다.



