# 01. 검색 기능

```python
# views.py
from django.db.models.functions import Concat

def index(request):

    search = request.GET.get('search')
    selected_type = request.GET.get('selected_type')
    # 검색어가 있을때, 없을때
    if search is not None:
        # 검색
        # 이름, 지역을 포함해서 검색
        if selected_type == 'country':
            users = User.objects.filter(country__contains = search)
        else:
            users = User.objects.annotate(search_name=Concat('last_name','first_name'))
            users = users.filter(search_name__contains = search)
    else:
        # 검색 x
        users = User.objects.all()
    context = {
        'users' : users,
    }
    return render(request, 'users/index.html', context)
```



```html
<!-- index.html -->

    <form class='mb-5 d-flex justify-content-end' method="GET">
      <select name="selected_type" class="me-2">
        <option value="first_name" selected>이름</option>
        <option value="country">지역</option>
      </select>
      <input name="search" class="form-control-sm">
      <button type="submit" value="검색하기" class="btn btn-clear">
        <i class="fa-sharp fa-solid fa-magnifying-glass"></i>
      </button>
    </form>
```

